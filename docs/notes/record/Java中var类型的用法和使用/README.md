# ğŸ”ï¸Java ä¸­ var ç±»å‹çš„ç”¨æ³•å’Œä½¿ç”¨

<hr/>

[[toc]]

> ç®€è¯„ï¼šJava var != JavaScript varã€‚

## ä»€ä¹ˆæ˜¯ç±»å‹æ¨æ–­

å…¶å®åœ¨ Java ä¸­ç±»å‹æ¨æ–­æ—©å°±å­˜åœ¨äº†ï¼Œçœ‹ä¸‹ä¸‹é¢çš„ä¾‹å­ï¼š

```java
public void doSomething() {
    final List<String> names = new ArrayList<String>();
}
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ç»™ ArrayList å®šä¹‰æŒæœ‰çš„ç±»å‹å°±æ²¡å¿…è¦äº†ï¼Œå› ä¸º List<\String> å·²ç»å®šä¹‰äº†æˆ‘ä»¬éœ€è¦çš„ç±»å‹ String ï¼Œåœ¨ Java 7 ä¸­å¢åŠ äº†ç±»å‹æ¨æ–­ï¼Œè¿™æ—¶ä¾‹å­å¯ä»¥ç›´æ¥å†™æˆ

```java
public void doSomething() {
    final List<String> names = new ArrayList<>();
}
```

è¿™ä¸¤ç§å†™æ³•æ˜¯å®Œå…¨åˆæ³•çš„ï¼Œè€Œä¸”æœ€ç»ˆä¼šå½¢æˆä¸€æ ·çš„å­—èŠ‚ç ã€‚å¯¹ç»å¸¸ä½¿ç”¨æ³›å‹çš„å¼€å‘è€…æ¥è¯´ï¼Œå¯èƒ½æ—©å°±å¯¹ä¸Šé¢çš„ç±»å‹æ¨æ–­å†™æ³•ä¹ ä»¥ä¸ºå¸¸ã€‚

## é‚£ä»€ä¹ˆæ˜¯å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ï¼Ÿ

å³èƒ½æ¨æ–­å‡ºæ–¹æ³•ä¸­å±€éƒ¨å˜é‡çš„ç±»å‹ï¼Œè¿™æ˜¯ Java 10 ä¸­æ–°å¢çš„ç‰¹æ€§ï¼Œå¯¹åº”å…³é”®è¯ varï¼Œçœ‹ä¸ªä¾‹å­ ï¼š

```java
public void doSomething() {
    final ??? name = "Todd";
}
```

name æ˜¯ä»€ä¹ˆç±»å‹ï¼Œå¾ˆæ˜æ˜¾æ˜¯ Stringï¼Œè€Œ Java 10 å°±å¯ä»¥è®©ç¼–è¯‘å™¨å¸®æˆ‘ä»¬åˆ¤æ–­å…¶ç±»å‹ï¼Œæˆ‘ä»¬åªè¦å†™æˆä¸‹é¢çš„å½¢å¼ï¼š

```java
public void doSomething() {
    final var name = "Todd";
}
```

var çš„ä½¿ç”¨ä¸å±€é™äºå‡½æ•°å†…å£°æ˜çš„å˜é‡ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ç”¨äºå¾ªç¯çš„ç´¢å¼•ï¼š

```java
final List<String> names = new ArrayList<>();

public void doSomething() {
    for(var name: names) {
        System.out.println("Name: " + name);
    }
    for(var i = 0; i < names.size(); i++) {
        System.out.println("Name: " + names.get(i));
    }
}
```

æˆ‘å¿…é¡»ä½¿ç”¨ var å—ï¼Ÿä¸æ˜¯çš„ï¼Œè€æ–¹æ³•ä¸€æ ·å®Œç¾æ”¯æŒã€‚

## è¿™æ ·çš„åšæ³•å±é™©å—ï¼Ÿ

ä¸€ä¸ªå­—ï¼šä¸ã€‚
ç®€å•è¯´å®ƒæ˜¯å—é™äºå®ƒä»¬å­˜åœ¨çš„æ–¹æ³•ï¼ˆæˆ–å¾ªç¯å£°æ˜ï¼‰çš„èŒƒå›´ã€‚è¿™æ„å‘³ç€é™¤äº†å£°æ˜å®ƒä»¬çš„æ–¹æ³•çš„å¼€å‘ä¹‹å¤–ï¼Œäººä»¬ä¸ç¼–å†™ä¾èµ–äºè¿™äº›ç±»å‹çš„ä»£ç ã€‚
è¿˜æœ‰å¤§å®¶ä¼šæœ‰ä¸€ä¸ªç–‘æƒ‘ï¼Œå¾ˆå¤šè¯­è¨€ä¹Ÿæ˜¯ä¸éœ€è¦å®šä¹‰ç±»å‹çš„ï¼Œå®Œå…¨ç”±ç¼–è¯‘å™¨æå®šï¼Œä»¥ JavaScript ä¸¾ä¾‹ï¼š

```javascript
var x = 'Todd';
```

ç®€å•å§ï¼Œx æ˜¯ String ç±»å‹çš„ï¼Œä½†æ˜¯åœ¨ JS ä¸­èƒ½é‡æ–°å®šä¹‰ç±»å‹ï¼Œæ¯”å¦‚ï¼š

```javascript
var x = 'Todd';
x = 42;
```

åƒè¿™ç§ Java ä»¥åæ˜¯ä¸æ˜¯ä¹Ÿä¸ç”¨è€ƒè™‘å˜é‡ç±»å‹äº†ï¼Ÿé”™ï¼Œå’Œ JS ä¸ä¸€æ ·ï¼ŒJava ä¸­çš„ var åªèƒ½åœ¨å±€éƒ¨å˜é‡ä½¿ç”¨å¤–ï¼ŒåŒæ—¶æ˜¯ä¸èƒ½é‡å¤èµ‹å€¼çš„ï¼Œå°±æ‹¿ä¸Šé¢çš„ä¾‹å­ï¼Œä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼š

```java
public void doSomething() {
    var x = "Todd";
    x = 42;
}
```

Java æ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œæ¯ä¸ªå˜é‡éƒ½æœ‰å›ºå®šçš„å˜é‡ç±»å‹ã€‚

æ‰€ä»¥ var ä¸€ç‚¹éƒ½ä¸å±é™©ï¼ŒJava ä¹Ÿä¸ä¼šå› æ­¤å˜æˆåŠ¨æ€ç±»å‹åˆ†é…è¯­è¨€ï¼Œè¿™ä»…ä»…æ˜¯å¯¹å±€éƒ¨å˜é‡å¤šäº†ä¸€ç§å®šä¹‰æ–¹å¼ã€‚

## æ€»ç»“ä¸‹

1. Java var != JavaScript varï¼›
2. Var è§£å†³äº†ä½ æ˜¾ç¤ºå£°æ˜å˜é‡çš„ä¸€äº›éº»çƒ¦ï¼Œä½†ä»–ä»¬ä¾ç„¶å­˜åœ¨ï¼›
3. Var å£°æ˜çš„å˜é‡å’Œæ˜¾ç¤ºå£°æ˜çš„å˜é‡æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼›
4. Var ç±»å‹å˜é‡ä¸ä¼šå½±å“åˆ°ä½ å…¶ä»–çš„ä»£ç ï¼›

**ç”¨ var å£°æ˜å˜é‡çš„æ³¨æ„äº‹é¡¹ï¼š**

1. var åªèƒ½åœ¨æ–¹æ³•å†…å®šä¹‰å˜é‡ï¼Œä¸å…è®¸å®šä¹‰ç±»çš„æˆå‘˜å˜é‡ã€‚
2. var å®šä¹‰å˜é‡å¿…é¡»èµ‹åˆå§‹å€¼ï¼Œ------ã€‹ä»¥åä¸èƒ½åœ¨èµ‹åˆå§‹å€¼ã€‚
3. var æ¯æ¬¡åªèƒ½å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œä¸èƒ½å¤åˆå£°æ˜å˜é‡ã€‚

**ä½¿ç”¨ var å®šä¹‰å˜é‡çš„ä¼˜ç¼ºç‚¹ï¼š**
ä¼˜ç‚¹ï¼šä½¿ä»£ç ç®€æ´å’Œæ•´é½ã€‚
ç¼ºç‚¹ï¼šé™ä½äº†ç¨‹åºçš„å¯è¯»æ€§ã€‚

**ä»€ä¹ˆæ—¶å€™è¯¥ç”¨ var å®šä¹‰å˜é‡ï¼š**
å¦‚æœä½ å®šä¹‰å˜é‡æ—¶ï¼Œç»™å˜é‡èµ‹ç»™ä¸€ä¸ªç›´è§‚çš„å€¼ï¼Œè¿™æ—¶å°±å¯ä»¥ä½¿ç”¨ var å®šä¹‰å˜é‡ï¼Œ

**æœ€ä¸èƒ½ä½¿ç”¨ var å®šä¹‰å˜é‡ï¼š**

1. ç»™ var å®šä¹‰çš„å˜é‡èµ‹ç»™ä¸€ä¸ªå¾ˆå¤æ‚çš„è¡¨è¾¾å¼æ—¶ï¼Œè¿™æ ·ä½¿è¡¨è¾¾å¼çš„è¿”å›å€¼ä¸ç›´è§‚ï¼Œä¸èƒ½ç”¨ var å®šä¹‰å˜é‡ã€‚
2. var å®šä¹‰çš„å˜é‡ä½œç”¨åŸŸå¾ˆé•¿æ—¶ï¼Œæ–¹æ³•é•¿å’Œ var å˜é‡å½±å“è¾ƒå¤§æ—¶ï¼Œä¸ç”¨ var å®šä¹‰å˜é‡ã€‚
